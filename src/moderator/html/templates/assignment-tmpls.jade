script#my-assignment-li(type="text/x-handlebars-template").
  {{#if assignments}}
    {{#each assignments}}
    <li>
      <h3 class="title"><a href="{{url}}">{{title}}</a></h3>
      <div class="flex">
        <p class="deadline flex-1">{{expire_datetime}}</p>
        <p class="flex-1 tac"><a href="{{url}}" class="view btn">View</a></p>
      </div>
    </li>
    {{/each}}
  {{else}}
  <li class="faded">
    <h3 class="t3">No assignments created!</h3>
    <p>Create one by clicking the button to the left!</p>
  </li>
  {{/if}}



//- form for moderator to ask community a new question
script#active-assignment-template(type="text/x-handlebars-template").
  {{#if assignments}}
    {{#each assignments}}
    <li>
      <h3>{{ questions.[0].question_text }}</h3>
      <div class="flex assignment-meta">
        <div class="flex-1"><a href="view-assignment.html# {{ assignment_id}}">View</a></div>
        <p class="flex-2 assignment-deadline">{{expire_datetime}}</p>
      </div>
    </li>
    {{/each}}
  {{else}}
    <li class="faded">No active assignments</li>
  {{/if}}


//- form for moderator to ask community a new question
script#new-assignment-template(type="text/x-handlebars-template").
  <section id="new-assignment-section">
    <h3 class="t2">New Assignment</h3>
    <p id="question-text-preview">Please select a language...</p>

    <div id="assignment-form-wrapper" class="form">

      <div class="language-select-wrapper">
        <label>
          <span>Select language:</span>
          <select id="language-select" name="language_code">
            <option name="none" value="--">--</option>
            <option name="english" value="en">English</option>
            <option name="espanol" value="es">Espanol</option>
          </select>
        </label>
      </div>

      <div id="questions-container"></div>

      <div id="extra-assignment-fields" class="flex">
        <div class="languages-wrapper flex-3">
          <p><small>Supported Languages</small></p>
          <ul id="supported-languages" class="inline">
          </ul>
        </div>
        <div class="flex-2">
          <p><small>Duration</small></p>
          <p class="inline-block">
            <span>Due:</span>
            <input type="number" id="lifetime" value="14">
            <input type="hidden" name="life_time" value="">
          </p>
          <ul id="unit-of-time-list" class="inline-block">
            <li>
              <label>
                <input type="radio" name="unit-of-time" value="days" checked>
                <span>Days</span>
              </label>
            </li>
            <li>
              <label>
                <input type="radio" name="unit-of-time" value="months">
                <span>Months</span>
              </label>
            </li>
          </ul>
        </div>
      </div>

      <div class="form-actions flex">
        <div class="flex-1">
          <span id="cancel-assignment-btn" class="action">Cancel</span>
        </div>
        <div class="flex-3">
          <span id="save-assignment-btn" class="action">Save Draft</span>
          <span id="preview-assignment-btn" class="action">Preview</span>
          <span id="post-assignment-btn">Post Assignment</span>
        </div>
      </div>
    </div>
  </section>

script#language-support-template(type="text/x-handlebars-template").
  {{#each languages}}
  <li>{{name}}</li>
  {{/each}}
  <li id="add-language-btn">+ Add Language</li>





script#new-question-template(type="text/x-handlebars-template").
  <form id="{{language}}-question-form" class="form">
    <input type="hidden" name="language_code" value="{{language}}">
    <ul class="form-fields-list">
      <li>
        <textarea id="question_textarea" rows="3" name="question_text" placeholder="Ask the community..."></textarea>
      </li>
      <li>
        <textarea rows="2" name="description" placeholder="Add a description"></textarea>
      </li>
      <li class="flex extra-fields">
        <div class="flex-3">
          <p><small>Question Type</small></p>
          <label>
            <input type="radio" name="question_type" value="free_text" checked>
            <span>Free Response</span>
          </label>
          <label>
            <input type="radio" name="question_type" value="multiple_choice">
            <span>Survey</span>
          </label>
        </div>
        <div class="flex-2 add-photo-wrapper">
          <p><small>Add a photo <em> * Optional</em></small></p>
          <input type="file" name="media_file">
        </div>
      </li>
      <li class="answers-input-wrapper flex">
        <div class="flex-3">
          <p><small>Answers</small></p>
          <input class="question-answer-input" type="text" placeholder="Press [Enter] to add an answer">
        </div>
        <div class="flex-1">
          <ul id="survey-answers-list"></ul>
        </div>
      </li>
    </ul>
  </form>

script#new-survey-answer-template(type="text/x-handlebars-template").
  <li>{{answer}}</li>


script#assignment-overview-template(type="text/x-handlebars-template").
  <h2 class="t3">Assignment {{assignment.assignment_id}}</h2>
  <h3 class="t1">{{assignment.questions.[0].question_text}}</h3>
  <div class="flex">
    <div class="flex-2">
      <p>{{assignment.questions.[0].description}}</p>
      <ul class="inline assignment-dates-list">
        <li class="assignment-published">{{assignment.publish_datetime}}</li>
        <li class="assignment-deadline">{{assignment.expire_datetime}}</li>
      </ul>
    </div>
    <div class="flex-1">
      <p><span id="edit-assignment-btn" class="btn">Edit</span><span id="close-assignment-btn" class="btn">Close</span></p>
      <p class="write-article-btn-container"><a href="editor.html# {{assignment.assignment_id}}" id="write-article-btn" class="btn">Write Article</a></p>
    </div>
  </div>
  <div class="meta-div" data-assignment-id="{{assignment.assignment_id}}"></div>





//- assignment replies
script#assignment-response-li-template(type="text/x-handlebars-template").
  {{#if replies}}
    {{#each replies}}
    <li id="post-id-{{post_id}}">
      <div class="gi">
        <div class="story-item">
          <p class="description">{{title}}</p>
          {{#each media_objects }}
          <div class="media-preview" data-type="{{ media_type }}">
            {{#if file_name}}
            <figure class="media-file-image">
              <img src="http://127.0.0.1:8080/media/{{file_name}}" alt="{{ media_description }}">
              <figcaption>{{ media_description }}</figcaption>
            </figure>
            {{else}}
            <p class="media-text">{{ media_text }}</p>
            {{/if}}

            {{#if caption}}
            <p>{{ caption }}</p>
            {{/if}}
          </div>
          {{/each }}
        </div>
        <div class="story-meta flex">
          <p class="source flex3"><a href="#">{{client_id}}</a></p>
          <ul class="options-list flex-1">
            <li><i title="Add to collection" class="fa fa-plus"></i></li>
            <li><i title="Leave feedback" class="fa fa-comment"></i></li>
            <li><i title="Mark as inappropriate" class="fa fa-flag"></i></li>
            <li><i title="Remove from responses" class="fa fa-trash"></i></li>
          </ul>
          <div data-post-id="{{post_id}}" data-source="anonymous" data-uid="{{ client_id }}" class="meta-div"></div>
        </div>
      </div>
    </li>
    {{/each}}
  {{else}}
    <li class="faded">
      <h3 class="t2">No replies yet</h3>
      <p>It might take a while for people to respond. Also be sure to check the regular feed just in case.</p>
    </li>
  {{/if}}
